<properties 
    pageTitle="Exceptions de relais | Microsoft Azure"
    description="Liste des exceptions de relais et les actions suggérées."
    services="service-bus"
    documentationCenter="na"
    authors="jtaubensee"
    manager="timlt"
    editor="tysonn" />
<tags 
    ms.service="service-bus"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="na"
    ms.date="10/28/2016"
    ms.author="jotaub" />

# <a name="relay-exceptions"></a>Exceptions de relais

Cet article répertorie quelques exceptions générées par les API de relais Microsoft Azure. Cette référence peut être modifié, reportez-vous à nouveau les mises à jour.

## <a name="exception-categories"></a>Catégories d’exceptions

Les API de relais génèrent des exceptions qui peuvent se trouvent dans les catégories suivantes, ainsi que l’action associée, que vous pouvez prendre pour essayer de corriger.

1.  Utilisateur codage d’erreur ([System.ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx), [System.InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx), [System.OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx), [System.Runtime.Serialization.SerializationException](https://msdn.microsoft.com/library/system.runtime.serialization.serializationexception.aspx)). Action générale : essayer de corriger le code avant de poursuivre.

2.  Erreur d’installation/configuration ([Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingentitynotfoundexception.aspx), [System.UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx). Action générale : vérifier votre configuration et modifier si nécessaire.

3.  Exceptions transitoires ([Microsoft.ServiceBus.Messaging.MessagingException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.aspx), [Microsoft.ServiceBus.Messaging.ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx), [Microsoft.ServiceBus.Messaging.MessagingCommunicationException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingcommunicationexception.aspx)). Action générale : recommencez l’opération ou informer les utilisateurs.

4.  Autres exceptions ([System.Transactions.TransactionException](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx), [System.TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx), [Microsoft.ServiceBus.Messaging.MessageLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagelocklostexception.aspx), [Microsoft.ServiceBus.Messaging.SessionLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sessionlocklostexception.aspx)). Action générale : selon le type d’exception ; reportez-vous à la table dans la section suivante. 

## <a name="exception-types"></a>Types d’exception

Le tableau suivant répertorie les types d’exception messagerie et leurs causes et action suggérée notes que vous pouvez prendre.

| **Type d’exception**                                                                                                                                                                                                                                                                                | **Description/Cause/exemples**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | **Action suggérée**                                                                                                                                                                                                                                                                                                                                                                                                          | **Remarque sur nouvelle tentative automatique/immédiate**                                                                                             |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx)                                                                                                                                                                                                           | Le serveur n’a pas répondu à l’opération demandée dans le délai spécifié qui est contrôlée par [OperationTimeout](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout.aspx). Le serveur peut avoir terminé l’opération demandée. Cela peut arriver en raison de réseau ou d’autres retards infrastructure.                                                                                                                                                                                                                                                                   | Vérifiez l’état du système pour la cohérence et réessayez si nécessaire. Voir les [exceptions d’expiration](#timeoutexception).                                                                                                                                                                                                                                                                                                                                                           | Nouvelles tentatives peuvent vous aider dans certains cas ; Ajouter une logique de nouvelle tentative au code.                                                                      |
| [InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx)                                                                                                                                                                                         | L’opération utilisateur demandé n’est pas autorisée dans le serveur ou le service. Consultez le message d’exception pour plus d’informations. Par exemple, [achevé](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.brokeredmessage.complete.aspx) générera cette exception si le message a été reçu en mode **ReceiveAndDelete** .                                                                                                                                                                                                                                                                                                     | Vérifier le code et la documentation. Vérifiez que l’opération demandée est valide.                                                                                                                                                                                                                                                                                                                                         | Nouvelle tentative ne permettra pas.                                                                                                          |
| [OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx)                                                                                                                                                                                       | Tentative d’appeler une opération sur un objet qui a déjà été fermé, abandonnée ou supprimé. Rarement, la transaction ambiance est déjà supprimée.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Vérifiez le code et vérifiez qu’il n’appelle pas les opérations sur un objet supprimé.                                                                                                                                                                                                                                                                                                                                          | Nouvelle tentative ne permettra pas.                                                                                                          |
| [UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx)                                                                                                                                                                                     | L’objet [TokenProvider a](https://msdn.microsoft.com/library/azure/microsoft.servicebus.tokenprovider.aspx) n’a pas pu obtenir un jeton, le jeton n’est pas valide ou le jeton ne contient-elle pas les revendications requises pour exécuter l’opération.                                                                                                                                                                                                                                                                                                                                                                                                  | Vérifiez que le fournisseur de jetons est créé avec les valeurs correctes. Vérifiez la configuration du service de contrôle d’accès.                                                                                                                                                                                                                                                                                                   | Nouvelles tentatives peuvent vous aider dans certains cas ; Ajouter une logique de nouvelle tentative au code.                                                                      |
| [ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx)<br /> [ArgumentNullException](https://msdn.microsoft.com/library/system.argumentnullexception.aspx)<br />[ArgumentOutOfRangeException](https://msdn.microsoft.com/library/system.argumentoutofrangeexception.aspx) | Un ou plusieurs arguments fournis à la méthode ne sont pas valides.<br /> L’URI fournie à [NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) ou [créer](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx) contient des segments de chemin d’accès.<br /> Le modèle URI fourni à [NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) ou [créer](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx) n’est pas valide. <br />La valeur de propriété est supérieure à 32 Ko. | Vérifiez le code d’appel et assurez-vous que les arguments sont corrects.                                                                                                                                                                                                                                                                                                                                                           | Nouvelle tentative ne permettra pas.                                                                                                          |
| [ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx)                                                                                                                                                                       | Service n’est pas en mesure de traiter la demande pour le moment.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Client, vous pouvez attendre pour une période donnée, puis recommencez l’opération.                                                                                                                                                                                                                                                                                                                                                           | Client pouvez réessayer après un certain intervalle. Si une nouvelle tentative entraîne une exception différente, vérifiez le comportement des nouvelles tentatives de cette exception. |
| [QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx)                                                                                                                                                                 | L’entité de messagerie a atteint sa taille maximale autorisée.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Créer un espace dans l’entité en recevant des messages à partir de l’entité ou ses sous-dossiers files d’attente. Voir [QuotaExceededException](#quotaexceededexception).                                                                                                                                                                                                                                                                                                                                      | Nouvelle tentative peut être utile si les messages ont été supprimés dans l’intervalle.                                                               |
| [MessageSizeExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagesizeexceededexception.aspx)                                                                                                                                                     | Une charge utile du message dépasse la limite de 256 Ko. Notez que la limite de k 256 est la taille totale du message, qui peut inclure des propriétés système et toute surcharge .NET.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Réduire la taille de la charge utile de message, puis recommencez l’opération.                                                                                                                                                                                                                                                                                                                                                         | Nouvelle tentative ne permettra pas.                                                                                                          |

## <a name="quotaexceededexception"></a>QuotaExceededException

[QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx) indique a dépassé un quota pour une entité spécifique.

Pour le relais, cette exception à la ligne la [System.ServiceModel.QuotaExceededException](https://msdn.microsoft.com/library/system.servicemodel.quotaexceededexception.aspx), indiquant que le nombre maximal de récepteurs a été dépassé pour ce point de terminaison. Cela est indiqué dans la valeur **MaximumListenersPerEndpoint** du message d’exception.

## <a name="timeoutexception"></a>TimeoutException 

Une [exception TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx) indique qu’une opération initialisé par l’utilisateur est en cours dépasse le délai d’expiration de l’opération. 

Vous devez vérifier la valeur de la propriété [ServicePointManager.DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit) , comme réussir cette limite peut également cause une [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx).

Pour le relais, vous pouvez recevoir exceptions d’expiration lors de la première ouverture d’une connexion de l’expéditeur relais. Il existe deux causes courantes pour cette exception :

1. La valeur [OpenTimeout](https://msdn.microsoft.com/library/wcf.opentimeout.aspx) peut-être être trop petite (y compris une fraction d’une seconde).
2. La listener(s) relais local peut ne pas être injoignable (ou peut-être rencontrer des problèmes de règles de pare-feu concernant l’interdiction de l’écoute d’accepter les nouvelles connexions client) et la valeur [OpenTimeout](https://msdn.microsoft.com/library/wcf.opentimeout.aspx) est inférieure à environ 20 secondes.

Par exemple :

```
'System.TimeoutException’: The operation did not complete within the allotted timeout of 00:00:10. The time allotted to this operation may have been a portion of a longer timeout.
```

### <a name="common-causes"></a>Causes courantes

Il existe deux causes pour cette erreur : une configuration incorrecte ou une erreur de service transitoires.

1. **Une configuration incorrecte** 
    le délai d’expiration de l’opération peut-être être trop petit pour la condition opérationnelle. La valeur par défaut pour le délai d’expiration de l’opération dans le Kit de développement logiciel client est de 60 secondes. Vérifiez si votre code a la valeur définie pour qu’elle soit trop petit. Notez que la condition du réseau et de l’UC peut affecter le temps que nécessaire pour une opération de particulière, afin que le délai d’expiration de l’opération ne doit pas être définie sur une valeur très petite.

2. **Erreur du service transitoires** 
    parfois relais peuvent subir des retards de traitement des demandes ; par exemple, pendant les périodes de trafic élevé. Dans ce cas, vous pouvez renouveler votre opération après un délai, jusqu'à ce que l’opération réussit. Si la même opération échoue encore après plusieurs tentatives, visitez le [site état du service Azure](https://azure.microsoft.com/status/) pour déterminer s’il existe des interruptions de n’importe quel service connus.

## <a name="next-steps"></a>Étapes suivantes :

- [Relais Forum aux questions](relay-faq.md)
- [Créer un espace de noms](relay-create-namespace-portal.md)
- [Prise en main .NET](relay-hybrid-connections-dotnet-get-started.md)
- [Prise en main nœud](relay-hybrid-connections-node-get-started.md)