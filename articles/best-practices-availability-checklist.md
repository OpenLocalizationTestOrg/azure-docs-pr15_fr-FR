<properties
   pageTitle="Liste de vérification disponibilité | Microsoft Azure"
   description="Liste de vérification qui fournit des instructions pour les problèmes de disponibilité lors de la conception."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="availability-checklist"></a>Liste de vérification de disponibilité

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="application-design"></a>Conception de l’application

- **Évitez de n’importe quel point de défaillance unique.** Tous les composants, les services, les ressources et les instances de calcul doivent être déployés comme plusieurs instances pour empêcher un point de défaillance unique d’affecter la disponibilité. Cela inclut les mécanismes d’authentification. Créer l’application à être configuré pour utiliser plusieurs instances et pour automatiquement détecter les échecs et rediriger les requêtes vers instances-Impossible où la plateforme ne le fait pas automatiquement.
- **Décomposer la charge de travail par un autre contrat de niveau de service.** Si un service est composé de moins stratégiques et les charges de travail, les gérer différemment et spécifier les fonctionnalités de service et le nombre d’instances de répondre aux exigences de disponibilité.
- **Réduire et comprendre les dépendances de service.** Réduire le nombre de différents services utilisées dès que possible et assurez-vous que vous comprenez toutes les dépendances de fonctionnalité et le service qui existent dans le système. Cela inclut la nature de ces dépendances et l’impact d’échec ou réduit les performances dans chacun d’eux dans l’application globale. Microsoft garantit au moins une disponibilité 99,9 % pour la plupart des services, mais cela signifie que chaque service supplémentaire dépend potentiellement d’une application réduit la disponibilité globale SLA de votre système de 0,1 %.
- **Créer des tâches et les messages à être équipotentes (en toute sécurité répétitifs) si possible**, afin que dupliqué demandes ne va pas entraîner des problèmes. Par exemple, un service peut agir en tant que consommateur qui gère les messages envoyés en tant que requêtes par d’autres parties du système agissent en tant que producteur. Si le consommateur échoue après traitement du message, mais avant confirmant qu’il a été traité, un producteur peut envoyer une demande de répétition qui pourrait être gérée par une autre instance du consommateur. Pour cette raison, les consommateurs et les opérations qu’ils effectuent doivent être idempotents afin que répéter une opération exécutée précédemment ne rend pas les résultats non valides. Il est possible que les conséquences détection des messages en double ou garantir la cohérence à l’aide d’une approche optimiste à la gestion des conflits.
- **Utiliser un agent de message qui mettent en œuvre, disponibilité des transactions critiques.** Nombreux scénarios pour initier des tâches ou d’accéder à des services à distance utilisent la messagerie pour transmettre des instructions entre l’application et le service cible. Pour de meilleures performances, l’application doit être en mesure d’envoyer le message, puis revenez pour traiter les demandes de plus, sans avoir besoin d’attendre une réponse. Pour garantir la remise des messages, le système de messagerie doit fournir une disponibilité élevée. Azure files d’attente de Service Bus implémentent sémantique _au moins une fois_ . Cela signifie que chaque message envoyé à une file d’attente ne seront pas perdu, bien que les copies en double peuvent être remis dans certaines circonstances. Si le traitement des messages est idempotent (voir l’élément précédent), répétée remise ne doit pas être un problème.
- **Concevoir des applications à dégradation propre** lorsque atteindre les limites des ressources et prendre des mesures appropriées pour réduire l’impact de l’utilisateur. Dans certains cas, la charge de l’application peut dépasser la capacité d’un ou plusieurs composants, à l’origine de réduction de la disponibilité et échecs de connexions. Mise à l’échelle peut aider à résoudre ce problème, mais elle peut atteindre une limite imposée par d’autres facteurs, tels que la disponibilité des ressources ou le coût. Concevoir l’application de sorte que, dans ce cas, il peut automatiquement dégradé. Par exemple, dans un système de commerce électronique, si le traitement des commandes sous-système se trouve sous OCULAIRE (ou a échoué même complètement), il peut être temporairement désactivé tout en permettant aux autres fonctionnalités (par exemple, la navigation sur le catalogue de produits) pour continuer. Il convient de reporter demandes vers un sous-système défectueux, par exemple la toujours permettant aux clients d’envoyer des commandes mais enregistrant pour un traitement ultérieur, lorsque le sous-système commandes redevient disponible.
- **Gérer correctement les événements rupture rapide.** La plupart des applications ont besoin gérer les charges de travail variables au fil du temps, tels que pointes commencer dans la matinée dans une application métier ou lorsqu’un nouveau produit est publié sur un site de commerce. Mise à l’échelle peut aider à gérer la charge, mais elle peut prendre un certain temps pour les instances supplémentaires sont en ligne et de gérer les requêtes. Empêcher soudains et inattendus Records d’activité de l’application est surchargé : concevoir aux demandes de file d’attente aux services qu’il utilise et se dégrader progressivement lorsque files d’attente sont à proximité de capacité maximale. Vérifiez que les performances et une capacité suffisantes est disponible dans des conditions non rupture à décharger les files d’attente et gérer des requêtes en attente. Pour plus d’informations, voir le [modèle de l’audit charge file d’attente](https://msdn.microsoft.com/library/dn589783.aspx).

## <a name="deployment-and-maintenance"></a>Déploiement et la maintenance

- **Déployer plusieurs instances des rôles pour chaque service.** Microsoft garantit la disponibilité des services que vous créez et déployez, mais ces garanties ne sont plus valides si vous déployez au moins deux instances de chaque rôle dans le service. Ainsi, un seul rôle à ne pas être disponible tandis que l’autre reste active. Ceci est particulièrement important si vous avez besoin déployer des mises à jour sur un système actif sans interrompre les activités de clients ; instances peuvent être redirigés vers le bas et mis à niveau individuellement tandis que les autres colonnes continuer en ligne.
- **Héberger des applications dans plusieurs centres de données.** Très peu, mais il est possible qu’un centre de données entière pour passer en mode hors connexion à un événement tel qu’un sinistre naturel ou Internet a échoué. Les applications professionnelles essentielles doivent être hébergées dans plusieurs centre de données pour assurer la disponibilité maximale. Cela peut également réduire la latence pour les utilisateurs locaux et fournissent des opportunités supplémentaires de flexibilité lors de la mise à jour des applications.
- **Automatiser et tâches de déploiement et la maintenance de test.** Applications distribuées se composent de plusieurs parties qui doivent collaborer. Déploiement doit donc être automatisé, à l’aide de mécanismes testés et approuvées tels que les scripts et les applications de déploiement. Ces peuvent mettre à jour et valider la configuration et automatiser le processus de déploiement. Techniques automatisées doivent également être utilisées pour effectuer des mises à jour de tout ou partie des applications. Il est essentiel de tester tous ces processus entièrement pour vous assurer que les erreurs n’entraînent pas de temps d’arrêt supplémentaires. Tous les outils de déploiement doivent avoir restriction de sécurité approprié pour protéger l’application déployée ; définir et appliquer des stratégies de déploiement attentivement et réduire la nécessité d’intervention humaine.
- **Envisagez d’utiliser les fonctionnalités de test et de production de la plateforme** lorsqu’elles sont disponibles. Par exemple, utilisant les environnements intermédiaires et de production Azure Cloud Services permet d’applications pour le changement de l’un à l’autre instantanément par le biais d’un échange d’adresse IP virtuel (VIP permutation). Toutefois, si vous préférez local, de l’étape ou déployer simultanément plusieurs versions de l’application et progressivement migrer des utilisateurs, vous pouvez ne pas être en mesure d’utiliser une opération de permutation VIP.
- **Appliquer les modifications de configuration sans recycler** l’instance lorsque cela est possible. Dans de nombreux cas, les paramètres de configuration d’une application Azure ou le service sont modifiables sans avoir besoin du rôle de redémarrer. Rôle exposent des événements qui peuvent être gérés pour détecter les changements de configuration et de les appliquer aux composants de l’application. Toutefois, certaines modifications dans les paramètres de plateforme core nécessitent un rôle à être redémarré. Lorsque vous créez des composants et services, optimiser la disponibilité et réduire les temps d’arrêt par leur conception pour accepter les modifications apportées aux paramètres de configuration sans avoir besoin de redémarrer l’application dans son ensemble.
- **Utiliser des domaines mise à niveau sans aucune interruption au cours des mises à jour.** Azure calculer unités, par exemple web et les rôles de travail sont allouées pour mettre à niveau des domaines. Mise à niveau domaines regroupement plusieurs instances de rôle afin que, lorsqu’une mise à jour propagée a lieu, chaque rôle dans le domaine de mise à niveau est arrêté, mis à jour et redémarré à son tour. Cela permet de réduire l’impact sur la disponibilité des applications. Vous pouvez spécifier le nombre de domaines mise à niveau doit être créé pour un service lorsque le service est déployé.

    > [AZURE.NOTE] Rôles sont également réparties entre domaines d’erreur, chacun d'entre eux est relativement indépendant à partir d’autres domaines d’erreur en termes de serveur rack, d’alimentation et refroidissement disposition, afin de réduire les risques d’une défaillance affecte toutes les instances de rôle. Cette distribution s’effectue automatiquement, et vous ne pouvez pas la contrôler.

- **Configurer des ensembles de disponibilité des machines virtuelles Azure.** En plaçant deux ou plusieurs machines virtuelles dans le même jeu de disponibilité garantit que ces ordinateurs virtuels ne sera pas déployés sur le même domaine défaillance. Pour optimiser la disponibilité, vous devez créer plusieurs instances de chaque machine virtuelle critique utilisée par votre système et placez ces instances dans le même jeu de disponibilité. Si vous exécutez plusieurs machines virtuelles qui ont des objectifs différents, créez une disponibilité définir pour chaque machine virtuelle. Ajouter des instances de chaque machine virtuelle à chaque jeu de disponibilité. Par exemple, si vous avez créé plusieurs machines virtuelles distinctes pour l’utiliser comme un serveur web et un serveur de rapports, créez une disponibilité défini pour le serveur web et un autre défini pour le serveur de rapports. Ajouter des instances de l’ordinateur web serveur virtuel pour la disponibilité du serveur web définir et ajouter des instances de la machine virtuelle serveur création de rapports à l’ensemble de disponibilité serveur création de rapports.

## <a name="data-management"></a>Gestion des données

- **Tirer parti de la réplication de données** grâce à la redondance locale et géographique. Données de stockage Azure sont automatiquement répliquées pour protéger contre la perte en cas d’échec de l’infrastructure et certains aspects de cette réplication peuvent être configurées. Par exemple, les copies en lecture seule de données peuvent être répliquées dans votre région géographique plusieurs (appelée stockage globalement redondants accès en lecture ou RA GRS). Notez que l’utilisation de RA GRS entraîne des frais supplémentaires. Pour plus d’informations, voir [Tarifs de stockage Azure](https://azure.microsoft.com/pricing/details/storage/).
- **Simultané utilisation et la cohérence éventuelle** autant que possible. Transactions que bloquer l’accès aux ressources via verrouillage (concurrence pessimiste) peut entraîner une baisse des performances et réduire considérablement la disponibilité. Ces problèmes peuvent devenir particulièrement élevés dans des systèmes distribués. Dans de nombreux cas, une conception et techniques comme partition peuvent réduire les risques de mises à jour conflictuelles se produisant. Données répliquées ou lire à partir d’un magasin séparément mis à jour, les données n’est finalement cohérentes. Mais les avantages généralement complètement l’emportent sur l’impact sur la disponibilité de l’utilisation de transactions pour garantir la cohérence immédiatement.
- **Utiliser périodique sauvegarde et restauration de point dans le temps**et vous assurer qu’il répond à l’objectifs de Point de récupération (RPO). Régulièrement et automatiquement sauvegarder des données qui ne sont pas conservées ailleurs, puis vérifiez que vous pouvez restaurer de manière fiable les données et l’application elle-même cas de panne. Réplication des données n’est pas une fonctionnalité de sauvegarde, car les erreurs et les incohérences présentées à une défaillance, d’erreur ou opérations malveillantes peuvent être répliquées sur tous les magasins. Le processus de sauvegarde doit être sécurisé pour protéger les données lors des transferts et dans le stockage. Bases de données ou des parties d’un magasin de données peuvent généralement être restaurées à un point antérieur dans le temps en utilisant les journaux des transactions. Microsoft Azure fournit une fonction de sauvegarde des données stockées dans la base de données SQL Azure. Les données exportées vers un package de sauvegarde de stockage d’objets blob Azure et peuvent être téléchargées vers un emplacement sécurisé en local pour le stockage.
- **Activer l’option disponibilité de conserver une copie d’un cache Azure Redis secondaire.** Lorsque vous utilisez Azure Redis Cache, choisissez l’option standard de conserver une copie du contenu secondaire. Pour plus d’informations, voir [créer un cache dans Azure Redis Cache](https://msdn.microsoft.com/library/dn690516.aspx).

## <a name="errors-and-failures"></a>Erreurs et échecs

- **Présenter le concept d’un délai d’expiration.** Services et des ressources peuvent devenir indisponibles, à l’origine de demandes échec. Garantir que les délais d’expiration vous appliquez sont appropriés pour chaque service ou la ressource ainsi que le client qui y accéder. (Dans certains cas, il peut être approprié permettre à un plus long délai d’expiration pour une instance particulière d’un client, selon le contexte et d’autres actions qui effectue le client.) Délais très courte peut entraîner des opérations de réessayer excessive des services et ressources dotées de latence considérable. Délais très longues peut entraîner le blocage si un grand nombre de requêtes est en attente, en attente d’un service ou d’une ressource pour répondre.
- **Réessayer les opérations échecs dus défaillances temporaires.** Concevoir une stratégie de nouvelles tentatives pour l’accès à tous les services et réessayer de ressources où ils ne pas fondamentalement prennent en charge la connexion automatique. Utiliser une stratégie qui inclut un délai croissant entre les tentatives en tant que le nombre d’échecs augmente, pour empêcher la surcharge de la ressource et qu’il puisse normalement récupérer et traiter les demandes en file d’attente. Nouvelles tentatives en continu avec les délais très courts sont susceptibles d’aggraver encore le problème.
- **Arrêter l’envoi des requêtes afin d’éviter les échecs en cascade** lorsque les services à distance ne sont pas disponibles. Il peut arriver dans lequel transitoires ou autres défauts, allant de gravité une perte partielle de connectivité à une panne complète d’un service, prennent beaucoup plus longtemps que prévu pour revenir à la normale. En outre, si un service est très occupé, défaillance dans une partie du système peut entraîner des échecs en cascade et à l’origine dans de nombreuses opérations bloquées tout en maintenant sur les ressources système critiques tels que la quantité de mémoire et fils de connexions de base de données. Au lieu de continuellement nouvelle tentative d’opération qui n’est pas susceptible de réussite, l’application doit accepter rapidement que l’opération a échoué et gérer correctement ce problème. Vous pouvez utiliser le modèle circuit séparateur pour refuser des demandes d’opérations spécifiques pour une durée prédéfinie. Pour plus d’informations, voir [Circuit séparateur motif](https://msdn.microsoft.com/library/dn589784.aspx).
- **Composition ou revient à plusieurs composants** à limiter l’impact d’un service spécifique en cours en mode hors connexion ou indisponible. Concevoir des applications pour tirer parti de plusieurs instances sans qui affectent le fonctionnement et les connexions existantes lorsque cela est possible. Utiliser plusieurs instances et distribuer des demandes entre eux et détecter et éviter d’envoyer des demandes à Échec d’instances, afin d’optimiser la disponibilité.
- **Revient à un autre service ou un flux de travail** lorsque cela est possible. Par exemple, si l’écriture dans la base de données SQL échoue, stocker temporairement les données dans le stockage blob. Disposons d’équipements pour reproduire les opérations d’écriture dans le stockage blob de base de données SQL lorsque le service devient disponible. Dans certains cas, un échec de l’opération peut avoir une autre action qui permet à l’application de continuer à travailler même lorsqu’un composant ou service échoue. Si possible, détecter les échecs et rediriger les requêtes à d’autres services qui peuvent proposer une fonctionnalité de remplacement appropriée, ou pour sauvegarder l’ou les instances de fonctionnalités réduites qui peuvent gérer les principales opérations alors que le service principal est en mode hors connexion.

## <a name="monitoring-and-disaster-recovery"></a>Surveillance et récupération d’urgence

- **Fournir enrichie instrumentation pour susceptibles d’échecs et les événements qui échouent** à signaler le problème au personnel des opérations. Des échecs qui sont susceptibles de mais n’avez pas encore s’est produite, fournir des données suffisantes pour activer le personnel d’exploitation déterminer la cause, limiter la situation et vérifiez que le système reste disponible. Des échecs qui ont déjà eu lieu, l’application doit renvoyer un message d’erreur à l’utilisateur mais tenter de continuer en cours d’exécution, bien qu’avec des fonctionnalités réduites. Dans tous les cas, le système de surveillance doit capturer des informations détaillées pour permettre les opérations personnel effectuer une récupération rapide et si nécessaire, pour les concepteurs et les développeurs de modifier le système empêcher la situation découlant à nouveau.
- **Surveiller l’intégrité du système en mettant en œuvre des fonctions de vérification.** La santé et les performances d’une application peuvent se dégrader au fil du temps, sans être visibles jusqu'à ce qu’il échoue. Mise en œuvre sondes ou fonctions qui sont exécutées régulièrement à partir d’en dehors de l’application de vérification. Ces contrôles peuvent être aussi simples que mesurer le temps de réponse de l’application dans son ensemble, des parties de l’application, services individuels qu’elle occupe ou des composants individuels. Fonctions de vérification peuvent exécuter des processus pour vous assurer qu’ils produisent des résultats valides, mesurent la latence et vérifier la disponibilité et extraient des informations à partir du système.
- **Tester régulièrement tous les systèmes secours et basculement** pour vous assurer qu’elles sont disponibles et fonctionnent comme prévu. Modifications apportées aux systèmes et opérations risquent de basculement et fonctions de secours, mais l’impact peut ne pas être détecté jusqu'à ce que le système principal échoue ou devient surchargé. Tester avant qu’il est requis pour composer un problème live lors de l’exécution.
- **Tester les systèmes de surveillance.** Basculement automatisé et systèmes de secours et de visualisation manuelle d’intégrité du système et les performances à l’aide de tableaux de bord, tous les dépendent de surveillance et d’instrumentation fonctionne correctement. Si ces éléments échouent manquez des informations critiques, ou l’état des données inexactes, un opérateur ne peut-être pas réalisé que le système est défectueux ou échouent.
- **Suivre l’évolution des flux de travail longue** et réessayer en cas d’échec. Flux de travail longue est souvent composés de plusieurs étapes. Vérifiez que chaque étape est indépendante et peut être retentée pour réduire les risques que le flux de travail entier devront être annulées ou que plusieurs transactions compensateurs doivent être exécutées. Surveillez et gérez la progression du flux de travail longue en mettant en œuvre d’un modèle comme [Modèle de planificateur Agent responsable](https://msdn.microsoft.com/library/dn589780.aspx).
- **Plan de récupération d’urgence.** Assurer un plan de documentation, accepté et entièrement testé de récupération à partir d’un type d’erreur qui peut-être rendre partie ou la totalité du réseau principal est indisponible. Tester les procédures régulièrement et assurez-vous que tous les membres du personnel opérations est familiarisé avec le processus.
